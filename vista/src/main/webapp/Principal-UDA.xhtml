<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Unidades de Aprendizaje</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/primeicons@6.0.1/primeicons.css"/>
    <style>
        :root{
            --green: #2b9b45;
            --green-rail: #008f1f;
            --text: #111;
            --card-bg: #ececec;
        }

        *{ box-sizing: border-box; }
        html, body{ height: 100%; }
        body{
            margin: 0;
            font-family: "Kaisei Opti", serif;
            color: var(--text);
            background: #fff;
        }

        .layout { display: grid; grid-template-columns: 50px 1fr; grid-template-rows: auto 1fr; min-height: 100vh; }
        .rail { grid-column: 1; grid-row: 2; background: var(--green-rail); border-radius: 0 16px 16px 0; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; padding-top:28px; box-shadow: 2px 0 6px rgba(0,0,0,.18); margin:28px 0; }
        a.rail-btn{ background: var(--card-bg); border: none; height: 30px; padding: 5px 18px 5px 32px; border-radius: 10px; margin-bottom: 10px; cursor: pointer; text-decoration: none; color: black; }
        a.alta-btn { background: transparent; border: none; height: 30px; padding: 5px 28px; border-radius: 10px; margin-bottom: 10px; cursor: pointer; text-decoration: none; color: black; }

        .topbar { grid-column: 1 / span 2; grid-row: 1; display: flex; align-items: center; gap: 32px; background: var(--green); color: #0a0a0a; padding: 14px 24px; border-radius: 0 0 10px 10px; box-shadow: 0 2px 6px rgba(0,0,0,.15); }
        .topbar .home{ display: inline-flex; align-items: center; justify-content: center; width: 28px; height: 28px; border-radius: 8px; }
        .topbar .menu{ display: flex; align-items: center; gap: 28px; font-size: 22px; font-weight: 600; }
        .topbar .menu span{ cursor: default; }

        .content { grid-column: 2; grid-row: 2; padding: 28px; display: flex; justify-content: center; align-items: stretch; }
        .card { flex: 1; width: min(1100px, 94%); background: var(--card-bg); border-radius: 12px; padding: 40px 20px 40px 40px; box-shadow: 0 2px 10px rgba(0,0,0,.08); display: grid; grid-template-columns: 250px 1fr; gap: 40px; }

        .actions { display: flex; flex-direction: column; gap: 40px; justify-content: center; margin-left: 100px; }
        .actions button { width: 180px; height: 50px; border: none; border-radius: 10px; background: #fff; box-shadow: 0 2px 6px rgba(0,0,0,.2); font-size: 18px; cursor: pointer; }

        .lista { background: #fff; border-radius: 10px; padding: 20px; margin-left: 300px; display: flex; flex-direction: column; gap: 12px; box-shadow: 0 2px 6px rgba(0,0,0,.15); max-height: 510px; max-width: 900px; overflow-y: auto; }
        .lista .item { background: var(--card-bg); border-radius: 8px; padding: 12px 16px; font-size: 18px; font-weight: 600; box-shadow: inset 0 1px 2px rgba(0,0,0,.05); }

        a.menu-btn, a.home-btn { appearance: none; -webkit-appearance: none; border: none; background-color: var(--green); font: inherit; line-height: 1; cursor: pointer; background: linear-gradient(to right, #3DAF94 50%, #111 50%); background-size: 200% 100%; background-position: right bottom; -webkit-background-clip: text; -webkit-text-fill-color: transparent; transition: background-position 0.4s ease; }
        a.home-btn { font-size: 30px; padding: 6px 10px; }
        a.menu-btn:hover, a.home-btn:hover { background-position: left bottom; }

        .btn .ui-button-text { color: #111; font-family: "Kaisei Opti", serif; font-size: 18px; }
        .ui-commandlink .item { background: var(--card-bg); border-radius: 8px; padding: 12px 8px; font-size: 18px; font-weight: 600; box-shadow: inset 0 1px 2px rgba(0,0,0,.05); color: #111; text-decoration: none; }
        .selected .item{ background-color: #b7e6b3; }
    </style>
</h:head>

<h:body>
    <h:form id="formUDA">

        <div class="layout">
            <!-- Barra lateral -->
            <aside class="rail">
                <a href="Principal-UDA.xhtml" class="rail-btn">Principal</a>
                <a href="Altas-UDA.xhtml" class="alta-btn">Alta</a>
            </aside>

            <!-- Barra superior -->
            <header class="topbar">
                <a href="Principal.xhtml" class="home-btn" aria-label="Inicio">
                    <span class="home"><i class="pi pi-home"></i></span>
                </a>
                <nav class="menu">
                    <a href="Profesores.xhtml" class="menu-btn">Profesores</a>
                    <a href="Principal-UDA.xhtml" class="menu-btn">Unidades de Aprendizaje</a>
                    <a href="AsignarUnidades-UA.xhtml" class="menu-btn">Asignar Unidades</a>
                    <a href="Consulta-CA.xhtml" class="menu-btn">Horarios</a>
                </nav>
            </header>

            <!-- Contenido -->
            <main class="content">
                <section class="card">

                    <!-- Botones (en un panel actualizable) -->
                    <p:outputPanel id="actions">
                        <div class="actions">
                            <p:commandButton value="Mostrar"
                                             actionListener="#{unidadUI.mostrarUnidades}"
                                             process="@this"
                                             update="lista actions"
                                             styleClass="btn"/>

                            <p:commandButton value="Modificar"
                                             styleClass="btn"
                                             disabled="#{unidadUI.seleccionada == null}"
                                             action="Modificar-UDA.xhtml" />

                            <p:commandButton value="Eliminar"
                                             styleClass="btn"
                                             disabled="#{unidadUI.seleccionada == null}"
                                             onclick="PF('confirmDelete').show(); return false;"/>
                        </div>
                    </p:outputPanel>

                    <!-- Lista de Unidades de Aprendizaje (en panel actualizable) -->
                    <p:outputPanel id="lista">
                        <div class="lista">
                            <ui:repeat value="#{unidadUI.unidades}" var="uda">
                                <p:commandLink action="#{unidadUI.seleccionar(uda)}"
                                               update="@form"
                                               styleClass="list #{unidadUI.seleccionada != null and unidadUI.seleccionada.idUA eq uda.idUA ? 'selected' : ''}">
                                    <div class="item">
                                        #{uda.idUA} - #{uda.nombre} - Horas de clase: #{uda.horasClase} -
                                        Horas de taller: #{uda.horasTaller} -
                                        Horas de laboratorio: #{uda.horasLaboratorio}
                                    </div>
                                </p:commandLink>
                            </ui:repeat>
                        </div>
                    </p:outputPanel>

                    <!-- Diálogo de confirmación -->
                    <p:confirmDialog id="confirmDelete" widgetVar="confirmDelete"
                                     message="¿Estás seguro de que deseas eliminar esta Unidad de Aprendizaje?"
                                     header="Confirmar Eliminación" severity="alert">
                        <p:commandButton value="Eliminar"
                                         action="#{unidadUI.eliminar}"
                                         process="@form"
                                         oncomplete="PF('confirmDelete').hide();"/>
                        <p:commandButton value="Cancelar" type="button"
                                         onclick="PF('confirmDelete').hide();" />
                    </p:confirmDialog>

                </section>
            </main>
        </div>

    </h:form>
</h:body>
</html>